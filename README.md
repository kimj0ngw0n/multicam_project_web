# 인터페이스 만들기

멀티캠퍼스 인터페이스 개인 프로젝트

> 2023.04.11 ~ 2023.04.13

간단한 기능이 있는 디스코드를 만들어 본다.

기능이 별로 없으므로 확장성을 생각하면서 기획한다.


## 목차

1. [기획](#기획)
2. [체크리스트](#체크리스트)
3. [요약](#요약)
4. [보완사항 및 아쉬운 점](#보완사항-및-아쉬운-점)


## 기획

### Model
    
#### ACCOUNTS

- `User` [유저]
    - `friends` : `ForeignKey(), self`  [FK/친구]
    - `friend_reqs` : `ForeignKey(), self`  [FK/친구요청목록]

#### SERVER

- `Server` [서버]
    - `name` : `CharField(20)`  [이름]

- `Access` [권한]
    - `server` : `ForeignKey()`  [FK/서버]
    - `user` : `ForeignKey()`  [FK/유저]
    - `type` : `CharField(20)`  [권한 종류]

- `Category` [카테고리]
    - `name` : `CharField(20)`  [이름]
    - `type` : `CharField(20)`  [공개 여부]
    - `server` : `ForeignKey()`  [FK/소속 서버]

- `Channel` [채널]
    - `name` : `CharField(20)`  [이름]
    - `type` : `CharField(20)`  [채널 종류]
    - `category` : `ForeignKey()`  [FK/소속 카테고리]

- `Message` [메시지]
    - `user` : `ForeignKey()`  [FK/작성자]
    - `channel` : `ForeignKey()`  [FK/소속 채널]
    - `created_at` : `DateTimeField()`  [작성일자]
    - `updated_at` : `DateTimeField()`  [수정일자]
    - `content` : `TextField()`  [내용]

- `Reaction` [메시지에 대한 반응]
    - `message` : `ForeignKey()`  [FK/메시지]
    - `reaction` : `CharField(20)`  [반응]

### Views

- Accounts

    - signup (회원가입)
    
        - 회원가입 하지 않을 시, 접속 안됨.

    - signin (로그인)

    - signout (로그아웃)

    - friends (친구목록)

    - profile (프로필)

    - request friend (친구요청)

    - feedback request (요청에 대한 반응)

    - delete friend (친구삭제)

- Server

    - create server

    - create category

    - create channel

    - create message

    - message detail

        - 블로그 댓글처럼 보이도록 구현

    - update server

    - update category

    - update channel

    - update message

    - delete server

        - 관리자만 삭제 가능

    - delete category

    - delete channel

    - delete message
    
        - 본인 또는 관리자만 삭제 가능

    - reaction message

        - 반응이 있는 경우만 출력

    - add member

        - 서버에 멤버 추가


## 체크리스트

### 1일차
1. ~~기획~~
2. ~~모델링~~
3. ~~view~~
4. ~~html 작성~~

### 2일차
1. template에 css 적용
2. 기타 수정사항 적용

### 3일차
1. 기타 수정사항 적용
2. 결과란 작성


## 요약

### 개요

누가봐도 디스코드라고 생각할 수 없습니다. 겉보기를 담당하는 css 적용을 끝내지 못했으니 당연한 결과이며, 다양한 기능들의 구현 또한 미흡합니다.

### 시작
우선 로그인을 해야만 다른 서비스를 이용할 수 있습니다.

### 프로필 화면
로그인을 한 이후 사용자의 프로필 화면으로 이동합니다. 또한 항상 맨 위에서 사용자가 속한 서버 목록을 확인할 수 있습니다.

### 서버

서버 내에서는 카테고리 및 채널을 추가할 수 있고, 채널 안에서 메시지를 작성할 수 있습니다. 다른 사용자를 서버에 추가하는 경우, 상대방을 강제로 초대하게 됩니다.

또한 아래 쪽에서 서버 내의 멤버 목록을 확인할 수 있습니다.

### 서버 내 객체 변경

카테고리 생성은 정상 작동하지만, 채널 생성 시, 카테고리를 직접 지정해줘야 합니다.

수정 기능은 없으며, 서버 안의 객체(서버, 카테고리, 채널, 메시지)를 삭제할 때, 메시지 생성자 또는 서버 주인만 삭제할 수 있습니다.

### 친구 기능

친구 요청을 보내면 상대방의 요청 목록에 해당 요청이 추가됩니다. 상대방을 요청을 수락 또는 거부할 수 있습니다.

다른 사용자의 친구 목록은 확인할 수 없으며, 본인의 친구 목록은 버튼을 눌러서 확인할 수 있습니다.


## 보완사항 및 아쉬운 점

### 기획에 더 많은 시간을 쓰고, 모델과 템플릿의 변화를 함께 생각했어야 했습니다.

결국 사용자에게 보이는 것은 템플릿이기 때문에, 모델을 먼저 작성한다고 하더라도 템플릿을 먼저 생각해야 했지만, 그렇지 못했습니다.

또한, `view` 함수 작성보다 템플릿 작성을 먼저 했다면 더 좋았을 것 같습니다. 템플릿에 쓰일 변수를 먼저 생각해놓고 함수를 작성했다면, 복잡했던 함수 작성을 조금 더 쉽게 했을 것 같습니다.

### 권한과 멤버 테이블을 따로 만들지 않았습니다.

처음엔 서버의 멤버가 되는 순간 아무런 권한도 없는 멤버를 추가하면 될 것이라 생각했습니다. 하지만, 특정 서버에 대한 유저의 권한을 불러오는 작업이 생각보다 많았고, 이미 작업이 많이 진행된 상황에서 모델을 수정하고 함수를 수정하기 힘들 것 같아, 기존 계획대로 진행했습니다.

### 처음에 생각했던 메시지에 대한 반응과 DM 기능이 없습니다.

반응을 커스텀해서 사용자에게 보여줄 수 있는 디스코드를 따라해보려 했지만, 다른 기능 구현만으로도 벅차서 구현하지 못했습니다.

DM 기능도 마찬가지입니다.

### 처음에 server를 surver로 잘못 작성했습니다.

이 오타 때문에 코드가 엇나간적은 없었지만, 중간에 알아차린 후 너무 찝찝했습니다.

### 무엇보다 욕심을 너무 냈습니다.

해보고 싶은 기능을 너무 많이 기획하다보니 사소한 실수에도 시간이 많이 걸렸습니다.